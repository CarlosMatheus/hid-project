(this.webpackJsonphid=this.webpackJsonphid||[]).push([[0],{10:function(t,e,n){},28:function(t,e,n){},55:function(t,e,n){"use strict";n.r(e);var r=n(1),a=(n(28),n(0)),i=n.n(a),s=n(24),c=n.n(s),o=n(9),l=(n(32),n(10),n(57)),h=n(59),u=n(58),d=n(8),j=n.n(d),x=n(25),b=n(15),f=n(12),p=n.n(f);p.a.defaults.headers.post["Content-Type"]="application/x-www-form-urlencoded";var O=function(){var t=Object(b.a)(j.a.mark((function t(e,n){var r;return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return console.log("Dispatching fetchEstimatedValues"),r={latMatrix:e,lonMatrix:n},"https://cors-anywhere.herokuapp.com/","https://obra-silenciosa-back.herokuapp.com/estimatedNoiseValues",t.next=6,p.a.post("https://cors-anywhere.herokuapp.com/https://obra-silenciosa-back.herokuapp.com/estimatedNoiseValues",Object(x.a)({headers:{"Access-Control-Allow-Origin":"*","Access-Control-Allow-Methods":"GET,PUT,POST,DELETE,PATCH,OPTIONS","Content-Type":"application/json;charset=utf-8"}},r)).then((function(t){return t.data.noiseMatrix})).then((function(t){return t})).catch((function(t){return console.log(t),t}));case 6:return t.abrupt("return",t.sent);case 7:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),g=function(){var t=Object(b.a)(j.a.mark((function t(){return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return console.log("Dispatching fetchSensorsPosition"),"https://cors-anywhere.herokuapp.com/","https://obra-silenciosa-back.herokuapp.com/sensorPositions",t.next=5,p.a.get("https://cors-anywhere.herokuapp.com/https://obra-silenciosa-back.herokuapp.com/sensorPositions",{headers:{"Access-Control-Allow-Origin":"*","Access-Control-Allow-Methods":"GET,PUT,POST,DELETE,PATCH,OPTIONS","Content-Type":"application/json;charset=utf-8"}}).then((function(t){return t.data})).then((function(t){return t})).catch((function(t){return console.log(t),t}));case 5:return t.abrupt("return",t.sent);case 6:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}(),M=function(t,e,n,r){var a=t*(Math.PI/180),i=n*(Math.PI/180),s=i-a,c=(r-e)*(Math.PI/180);return 12742e3*Math.asin(Math.sqrt(Math.sin(s/2)*Math.sin(s/2)+Math.cos(a)*Math.cos(i)*Math.sin(c/2)*Math.sin(c/2)))};function m(t,e,n,r,a,i){return{lat:(n-t)*i/a+t,lon:(r-e)*i/a+e}}var S=function(t,e,n,r){for(var a=[],i=0;i<t.length;i++){for(var s=[],c=0;c<e.length;c++){for(var o=!1,l=0;l<n.length;l++){var h=M(n[l],r[l],t[i][c],e[i][c]);o=o||h<1.5}s.push(o?1:0)}a.push(s)}return a},y=function(t,e){function n(t,e){var n=M(-23.588826342902333,-46.682215230240686,t,e);return 100*Math.exp(-n/50)/120}for(var r=[],a=0;a<t.length;a++){for(var i=[],s=0;s<e.length;s++){var c=n(t[a][s],e[a][s]);i.push(c)}r.push(i)}return r},v=function(t,e){return S(t,e,[-23.588826342902333],[-46.682215230240686])},w=n(7);function C(t){var e=t.toString(16);return 1==e.length?"0"+e:e}function k(t,e,n){return"#"+C(t)+C(e)+C(n)}var P=function(t){t.isMeter;var e,n,a=null!==(e=t.intensityPercentage)&&void 0!==e?e:0,i=t.lat,s=t.lon,c=parseInt(112*a+75),o=parseInt(-148*a+181),l=parseInt(-31*a+67),h=null!==(n=t.setSelectedSquare)&&void 0!==n?n:function(){return null};return Object(r.jsx)("div",{style:{height:5,width:5,backgroundColor:k(c,o,l),marginRight:1,marginBottom:1},onMouseEnter:function(){return h({lat:i,lon:s,intensityPercentage:a})},onMouseLeave:function(){return h(null)}},"".concat(Math.random()))};var q=function(t){var e=t.height,n=t.width,a=t.main||!1,i=Array(e).fill(Array(n).fill(Object(r.jsx)(P,{isMain:a}))),s=a?"#CDCDCD":"white",c=t.startRow,o=t.startColumn,l=t.intensityMatrix,h=t.latMatrix,u=t.lonMatrix;return Object(r.jsx)("div",{style:{display:"flex",backgroundColor:s},children:i.map((function(e,n){return Object(r.jsx)("div",{style:{display:""},children:e.map((function(e,i){return Object(r.jsx)(P,{setSelectedSquare:t.setSelectedSquare,isMain:a,intensityPercentage:l[n+c][i+o],lat:h[n+c][i+o],lon:u[n+c][i+o]},"".concat(n," ").concat(i))}))},"".concat(n))}))})};var I=function(t){var e,n=t.lenOfHeight,a=t.lenOfWidth,i=t.baseLength,s=t.latMatrix,c=t.lonMatrix,o=t.intensityMatrix;return Object(r.jsxs)("div",{style:{display:"flex"},children:[Object(r.jsx)("div",{children:[Object(r.jsx)(q,{setSelectedSquare:t.setSelectedSquare,intensityMatrix:o,latMatrix:s,lonMatrix:c,height:i,width:i,startRow:0,startColumn:0},Math.random()),Object(r.jsx)(q,(e={setSelectedSquare:t.setSelectedSquare,intensityMatrix:o,latMatrix:s,lonMatrix:c,height:i,width:a,startRow:0,startColumn:0},Object(w.a)(e,"startRow",0),Object(w.a)(e,"startColumn",i),e),Math.random()),Object(r.jsx)(q,{setSelectedSquare:t.setSelectedSquare,intensityMatrix:o,latMatrix:s,lonMatrix:c,height:i,width:i,startRow:0,startColumn:i+a},Math.random())]}),Object(r.jsx)("div",{children:[Object(r.jsx)(q,{setSelectedSquare:t.setSelectedSquare,intensityMatrix:o,latMatrix:s,lonMatrix:c,height:n,width:i,startRow:i,startColumn:0},Math.random()),Object(r.jsx)(q,{setSelectedSquare:t.setSelectedSquare,intensityMatrix:o,latMatrix:s,lonMatrix:c,main:!0,height:n,width:a,startRow:i,startColumn:i},Math.random()),Object(r.jsx)(q,{setSelectedSquare:t.setSelectedSquare,intensityMatrix:o,latMatrix:s,lonMatrix:c,height:n,width:i,startRow:i,startColumn:i+a},Math.random())]}),Object(r.jsx)("div",{children:[Object(r.jsx)(q,{setSelectedSquare:t.setSelectedSquare,intensityMatrix:o,latMatrix:s,lonMatrix:c,height:i,width:i,startRow:i+n,startColumn:0},Math.random()),Object(r.jsx)(q,{setSelectedSquare:t.setSelectedSquare,intensityMatrix:o,latMatrix:s,lonMatrix:c,height:i,width:a,startRow:i+n,startColumn:i},Math.random()),Object(r.jsx)(q,{setSelectedSquare:t.setSelectedSquare,intensityMatrix:o,latMatrix:s,lonMatrix:c,height:i,width:i,startRow:i+n,startColumn:i+a},Math.random())]})]})};var E=function(){var t=Object(a.useState)(null),e=Object(o.a)(t,2),i=e[0],s=e[1],c=-23.588826342902333,d=-46.682215230240686,j=-23.589672788243483,x=-46.68196461184181,b=-23.589956330973465,f=-46.68294486601919,p=M(c,d,j,x),w=M(j,x,b,f),C=parseInt(w),k=parseInt(p),q=function(t,e,n,r,a,i,s,c,o){for(var l=M(t,e,s,c),h=M(s,c,n,r),u=parseInt(h),d=parseInt(l),j=[],x=[],b=0;b<2*o+u;b++){for(var f=m(s,c,n,r,M(s,c,n,r),b-o),p=f.lat,O=f.lon,g=m(t,e,a,i,M(t,e,a,i),b-o),S=g.lat,y=g.lon,v=[],w=[],C=0;C<2*o+d;C++){var k=m(S,y,p,O,M(S,y,p,O),C-o),P=k.lat,q=k.lon;v.push(P),w.push(q)}j.push(v),x.push(w)}return{latMatrix:j,lonMatrix:x}}(c,d,b,f,-23.58908832749717,-46.68320100836799,j,x,30),E=q.latMatrix,T=q.lonMatrix,L=Object(a.useState)(y(E,T)),A=Object(o.a)(L,2),R=A[0],D=A[1],H=Object(a.useState)(y(E,T)),N=Object(o.a)(H,2),B=N[0],F=N[1],V=Object(a.useState)(v(E,T)),G=Object(o.a)(V,2),J=G[0],U=G[1];return Object(a.useEffect)((function(){O(E,T).then((function(t){console.log("fetchEstimatedValues"),console.log(t),D(t)})).catch((function(t){console.error("Error while trying to fetch estimated values: ".concat(t))})),g().then((function(t){console.log("fetchSensorsPosition"),console.log(t);var e=S(E,T,t.sensorsLatList,t.sensorLonList);U(e)})).catch((function(t){console.error("Error while trying to fetch sensors: ".concat(t))}))}),[]),Object(r.jsx)(r.Fragment,{children:Object(r.jsxs)(l.a,{style:{marginTop:24,marginBottom:24},children:[Object(r.jsx)("h1",{children:"HID Project"}),Object(r.jsxs)("p",{children:["This graph represents the sound intensity on each square meter on the construction site.",Object(r.jsx)("br",{}),"The big rectangle in the middle in the construction area.",Object(r.jsx)("br",{}),"Each small square has 1 by 1 meter.",Object(r.jsx)("br",{}),"The intensity of the sound on each."]}),Object(r.jsxs)("div",{style:{display:"flex",alignItems:"center"},children:[Object(r.jsx)(P,{intensityPercentage:0})," ",Object(r.jsx)("span",{style:{marginLeft:2},children:"".concat(70,"db")})]}),Object(r.jsxs)("div",{style:{display:"flex",alignItems:"center"},children:[Object(r.jsx)(P,{intensityPercentage:1})," ",Object(r.jsx)("span",{style:{marginLeft:2},children:"".concat(120,"db")})]}),Object(r.jsx)("p",{}),Object(r.jsx)("p",{}),Object(r.jsxs)(h.a,{children:[Object(r.jsx)(h.a.Header,{children:Object(r.jsxs)(u.a,{variant:"tabs",defaultActiveKey:"#1",children:[Object(r.jsx)(u.a.Item,{children:Object(r.jsx)(u.a.Link,{href:"#1",onClick:function(){F(R)},children:"Detection"})}),Object(r.jsx)(u.a.Item,{children:Object(r.jsx)(u.a.Link,{href:"#2",onClick:function(){F(J)},children:"Sensors"})}),Object(r.jsx)(u.a.Item,{children:Object(r.jsx)(u.a.Link,{href:"#3",onClick:function(){F(y(E,T))},children:"Detection Example - 1 Sensor"})}),Object(r.jsx)(u.a.Item,{children:Object(r.jsx)(u.a.Link,{href:"#5",onClick:function(){F(v(E,T))},children:"Sensors Example -  1 Sensor"})}),Object(r.jsx)(u.a.Item,{children:Object(r.jsx)(u.a.Link,{href:"#6",onClick:function(){F(function(t,e){var r=n(51).generatePerlinNoise(t,e),a=Array(t).fill(Array(e).fill(0));return a.forEach((function(t,n){t.forEach((function(t,i){a[n][i]=r[n*e+i]}))})),a}(C+60,k+60))},children:"Detection Example - Perlin Distribution"})})]})}),Object(r.jsxs)(h.a.Body,{children:[i?Object(r.jsxs)("div",{children:[Object(r.jsx)("span",{style:{marginRight:4},children:"Latitude: ".concat(i.lat)}),Object(r.jsx)("span",{style:{marginRight:4},children:"Longitude: ".concat(i.lon)}),Object(r.jsx)("span",{style:{marginRight:4},children:"Intensity: ".concat(50*i.intensityPercentage+70,"db")})]}):Object(r.jsx)("div",{children:Object(r.jsx)("span",{children:"Navigate on the graph"})}),Object(r.jsx)(I,{lenOfHeight:C,lenOfWidth:k,baseLength:30,latMatrix:E,lonMatrix:T,intensityMatrix:B,setSelectedSquare:s})]})]})]})})},T=function(t){t&&t instanceof Function&&n.e(3).then(n.bind(null,60)).then((function(e){var n=e.getCLS,r=e.getFID,a=e.getFCP,i=e.getLCP,s=e.getTTFB;n(t),r(t),a(t),i(t),s(t)}))};c.a.render(Object(r.jsx)(i.a.StrictMode,{children:Object(r.jsx)(E,{})}),document.getElementById("root")),T()}},[[55,1,2]]]);
//# sourceMappingURL=main.f638739f.chunk.js.map